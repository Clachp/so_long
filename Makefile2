NAME=		solong
NAME_BONUS=	solong_bonus

CC=			gcc
CFLAGS=		-Wall -Wextra -Werror
AR=			ar rcs
RM=			rm -f

#INCS_DIR=
#SRCS_DIR	= ./src/
LIB_DIR=	./lib/
MLX_DIR=	./mlx/
OBJ_DIR=	obj

LIB_NAME=	lib/lib.a


MLXFLAGS=		-Imlx -Lmlx -lmlx -L/usr/lib -lXext -lX11 -lm -lz

SRC=		window.c
INC=		

LIB=		$(addprefix $(LIB_DIR)/,$(LIB_NAME))
OBJ=		$(addprefix $(OBJ_DIR)/,$(SRC:%.c=%.o))

$(OBJ_DIR)/%.o: %.c
	@mkdir -p $(OBJ_DIR)
	@$(CC) $(CFLAGS) -I-I/usr/include -Imlx -O3 -c $< -o $@

$(NAME): $(OBJ)
	@make -C $(LIB_DIR)
	@echo "lib compiled"
	@make -C $(MLX_DIR)
	@echo -C "mlx compiled"
	@$(CC) -g3 -fsanitize=address -o $(NAME) $(OBJ) -L$(LIB_DIR) -llib.a -L$(MLX_DIR) $(MLXFLAGS)
	@echo "So long, Marianne, it's time that we began..."

all : $(NAME)

clean :
	@make -C $(LIB_DIR) clean
	@make -C $(MLX_DIR) clean
	@$(RM) $(OBJS_DIR)/

fclean : clean
	@rm -rf $(NAME)

re : fclean all

PHONY	: all clean fclean re bonus

# ----------------------------------------------------------------------------

#INCS_BONUS_DIR	= ./include_bonus/
#SRCS_BONUS_DIR	= ./src_bonus/

#INCS		= -I include
#MLX_FLAGS	= -L./mlx -lmlx -framework OpenGL -framework Appkit

#SRC_BONUS	=
#SRCS		=	$(addprefix $(SRCS_DIR), $(SRC))
#LIBS		=	$(addprefix $(LIB_DIR), $(LIB_NAME))
#OBJS		=	$(SRCS:.c=.o)

#SRCS_BONUS	=	$(addprefix $(SRCS_BONUS_DIR), $(SRC_BONUS))
#OBJS_BONUS	=	$(SRCS_BONUS:.c=.o)

#.c.o :
#	$(CC) $(CFLAGS) -I $(INCS_DIR) -o $@ -c $?

#$(NAME) : $(OBJS)
#	make -C $(LIB_DIR)
#	make -C $(MLX_DIR)
#	$(CC) -o $(NAME) $(OBJS) -L $(LIB_DIR) -l_jisokang -I $(INCS_DIR) -L $(MLX_DIR) -lmlx -framework OpenGL -framework Appkit

#clean :

#fclean : clean
#	make -C $(LIB_DIR) fclean
#	$(RM) $(NAME) $(NAME_BONUS)

#bonus : $(NAME_BONUS)
#
#$(NAME_BONUS) : $(OBJS_BONUS)
#	make -C $(LIB_DIR)
#	make -C $(MLX_DIR)
#	$(CC) -o $(NAME_BONUS) $(OBJS_BONUS) -L $(LIB_DIR) -l_jisokang -I $(INCS_BONUS_DIR) -L $(MLX_DIR) -lmlx -fsanitize=address

